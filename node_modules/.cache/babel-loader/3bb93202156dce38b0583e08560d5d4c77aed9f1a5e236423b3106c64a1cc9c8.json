{"ast":null,"code":"import React,{useState}from'react';import'./ChatInput.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInput=_ref=>{let{addMessage,onSend}=_ref;const[input,setInput]=useState('');const[isSending,setIsSending]=useState(false);const handleSend=async()=>{if(input.trim()){addMessage(input,'user');setIsSending(true);const messageToSend=input;setInput('');try{if(messageToSend.trim().toLowerCase()==='അതെ'){const response=await axios.get('http://localhost:5000/get_certificate',{responseType:'blob'// Set responseType to 'blob' to receive binary data\n});if(!response.data){throw new Error('Empty response received');}// Create a blob URL for the received data\nconst blob=new Blob([response.data]);const url=window.URL.createObjectURL(blob);// Create a hidden anchor element\nconst link=document.createElement('a');link.href=url;link.setAttribute('download','doc.pdf');// Set desired filename here\nlink.style.display='none';// Hide the anchor element\ndocument.body.appendChild(link);// Programmatically click the anchor to trigger download\nlink.click();// Clean up: remove the anchor element and revoke the blob URL\ndocument.body.removeChild(link);window.URL.revokeObjectURL(url);// Optionally, inform the user about the download action\naddMessage('എല്ലാ രേഖകളും ഡൗൺലോഡ് ചെയ്യുന്നു','bot');}else{// Handle other messages or call your backend as needed\nconst response=await fetch('http://127.0.0.1:5000/answer',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question:messageToSend})});if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();addMessage(data.answer,'bot');}}catch(error){console.error('There was a problem with the fetch operation:',error);}setIsSending(false);onSend();// Call the onSend function when the message is sent\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key==='Enter'&&!isSending&&handleSend(),placeholder:\"\\u0D12\\u0D30\\u0D41 \\u0D38\\u0D28\\u0D4D\\u0D26\\u0D47\\u0D36\\u0D02 \\u0D1F\\u0D48\\u0D2A\\u0D4D\\u0D2A\\u0D4D \\u0D1A\\u0D46\\u0D2F\\u0D4D\\u0D2F\\u0D41\\u0D15...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,disabled:isSending,\"aria-label\":\"Send message\",children:isSending?'Sending...':'അയയ്ക്കുക'})]});};export default ChatInput;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ChatInput","_ref","addMessage","onSend","input","setInput","isSending","setIsSending","handleSend","trim","messageToSend","toLowerCase","response","get","responseType","data","Error","blob","Blob","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","style","display","body","appendChild","click","removeChild","revokeObjectURL","fetch","method","headers","JSON","stringify","question","ok","json","answer","error","console","className","children","type","value","onChange","e","target","onKeyDown","key","placeholder","onClick","disabled"],"sources":["E:/Snippets/gov-react/src/components/ChatInput.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './ChatInput.css';\r\nimport axios from 'axios';\r\n\r\nconst ChatInput = ({ addMessage, onSend }) => {\r\n  const [input, setInput] = useState('');\r\n  const [isSending, setIsSending] = useState(false);\r\n\r\n  const handleSend = async () => {\r\n    if (input.trim()) {\r\n      addMessage(input, 'user');\r\n      setIsSending(true);\r\n      const messageToSend = input;\r\n      setInput('');\r\n\r\n      try {\r\n        if (messageToSend.trim().toLowerCase() === 'അതെ') {\r\n          const response = await axios.get('http://localhost:5000/get_certificate', {\r\n            responseType: 'blob' // Set responseType to 'blob' to receive binary data\r\n          });\r\n\r\n          if (!response.data) {\r\n            throw new Error('Empty response received');\r\n          }\r\n\r\n          // Create a blob URL for the received data\r\n          const blob = new Blob([response.data]);\r\n          const url = window.URL.createObjectURL(blob);\r\n\r\n          // Create a hidden anchor element\r\n          const link = document.createElement('a');\r\n          link.href = url;\r\n          link.setAttribute('download', 'doc.pdf'); // Set desired filename here\r\n          link.style.display = 'none'; // Hide the anchor element\r\n          document.body.appendChild(link);\r\n\r\n          // Programmatically click the anchor to trigger download\r\n          link.click();\r\n\r\n          // Clean up: remove the anchor element and revoke the blob URL\r\n          document.body.removeChild(link);\r\n          window.URL.revokeObjectURL(url);\r\n\r\n          // Optionally, inform the user about the download action\r\n          addMessage('എല്ലാ രേഖകളും ഡൗൺലോഡ് ചെയ്യുന്നു', 'bot');\r\n        } else {\r\n          // Handle other messages or call your backend as needed\r\n          const response = await fetch('http://127.0.0.1:5000/answer', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ question: messageToSend })\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error('Network response was not ok');\r\n          }\r\n\r\n          const data = await response.json();\r\n          addMessage(data.answer, 'bot');\r\n        }\r\n      } catch (error) {\r\n        console.error('There was a problem with the fetch operation:', error);\r\n      }\r\n\r\n      setIsSending(false);\r\n      onSend(); // Call the onSend function when the message is sent\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-input\">\r\n      <input\r\n        type=\"text\"\r\n        value={input}\r\n        onChange={(e) => setInput(e.target.value)}\r\n        onKeyDown={(e) => e.key === 'Enter' && !isSending && handleSend()}\r\n        placeholder=\"ഒരു സന്ദേശം ടൈപ്പ് ചെയ്യുക...\"\r\n      />\r\n      <button onClick={handleSend} disabled={isSending} aria-label=\"Send message\">\r\n        {isSending ? 'Sending...' : 'അയയ്ക്കുക'}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}